<app-side-nav></app-side-nav>
<br>
<br>
<br>
<h3><img src="https://image.flaticon.com/icons/svg/554/554834.svg"> มอบหมายงาน</h3>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">source</th>
      <th scope="col">destination</th>
      <th scope="col">worktype</th>
      <th scope="col">customerFirstname</th>
      <th scope="col">workDate</th>
      <th scope="col">workTime</th>
      <th scope="col">customerPhone</th>
      <th scope="col">customerLine</th>
      <th scope="col">detail</th>
      <th scope="col">status</th>
      <th scope="col">driver</th>
      <th scope="col">action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of job ; let i = index">
      <td (click)="openData(con)">
        <ng-template #con let-c="close" let-d="dismiss">
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">ข้อมูลการจ้าง</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <label for="typeahead-basic">ต้นทาง</label>
            <input id="typeahead-basic" type="text" class="form-control" name="source" ngModel
              [(ngModel)]="data.value.source" />
            <label for="typeahead-basic">ปลายทาง</label>
            <input id="typeahead-basic" type="text" class="form-control" name="destination" ngModel
              [(ngModel)]="data.value.destination" />
            <label for="typeahead-basic">ประเภทงาน</label>
            <input id="typeahead-basic" type="text" class="form-control" name="worktype" ngModel
              [(ngModel)]="data.value.worktype" />
            <label for="typeahead-basic">ชื่อลูกค้า</label>
            <input id="typeahead-basic" type="text" class="form-control" name="customerFirstname" ngModel
              [(ngModel)]="data.value.customerFirstname" />
            <label for="typeahead-basic"> วันที่</label>
            <input id="typeahead-basic" type="text" class="form-control" name="workDate" ngModel
              [(ngModel)]="data.value.workDate.day" />
            <label for="typeahead-basic"> เวลา</label>
            <input id="typeahead-basic" type="text" class="form-control" name="workTime" ngModel
              [(ngModel)]="data.value.workTime.hour" />
            <label for="typeahead-basic"> เบอร์ติดต่อ</label>
            <input id="typeahead-basic" type="text" class="form-control" name="customerLine" ngModel
              [(ngModel)]="data.value.customerPhone" />
            <label for="typeahead-basic"> เบอร์ติดต่อ</label>
            <input id="typeahead-basic" type="text" class="form-control" name="customerLine" ngModel
              [(ngModel)]="data.value.customerPhone" />
            <label for="typeahead-basic"> รายละเอียดการจ้าง</label>
            <input id="typeahead-basic" type="text" class="form-control" name="detail" ngModel
              [(ngModel)]="data.value.detail" />
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary">
              edit
            </button>
            <button type="button" class="btn btn-outline-success" (click)="c('Save click')">
              Save
            </button>
          </div>
        </ng-template>

        {{ data.value.source }}
      </td>
      <td>{{ data.value.destination }}</td>
      <td>{{ data.value.worktype }}</td>
      <td>{{ data.value.customerFirstname }}</td>
      <td>{{ data.value.workDate.day }} /{{ data.value.workDate.month}} / {{data.value.workDate.year }}</td>
      <td>{{ data.value.workTime.hour}}:{{ data.value.workTime.minute}} น. </td>
      <td>{{ data.value.customerPhone }}</td>
      <td>{{ data.value.customerLine }}</td>
      <td>{{ data.value.detail }}</td>
      <td>{{ data.value.statusDriver }}</td>
      <td (click)="openDataDriver(con)">{{ data.value.driver }}

        <ng-template #con let-c="close" let-d="dismiss">
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">ข้อมูลพนักงานขับรถ</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

            <label for="typeahead-basic">เปลี่ยนพนักงานขับรถ</label>
            <select (change)="selectValue($event)" class="form-control">
              <option value="">{{ data.value.driver }} พนักงานขับรถปัจจุบัน</option>
              <option value="{{data2.value.email}},{{data2.value.firstname}},{{data2.value.token}}" *ngFor="let data2 of wikis">
                {{ data2.value.firstname }}
              </option>
            </select>
          </div>
          <div class="modal-footer">

            <button type="button" class="btn btn-outline-success" (click)="editJobDriver(data)">
              Save
            </button>
          </div>
        </ng-template>


      </td>
      <td>
        <div class="iconGroup">
          <button type="button" class="btn icon" (click)="editJob(data)" placement="bottom" ngbTooltip="Submit"><i class="fas fa-check-circle"></i></button>
          <button type="button" class="btn icon" (click)="delJob(data)" placement="bottom" ngbTooltip="Delete"><i class="fas fa-trash-alt"></i></button>
        </div>
      </td>

    </tr>
  </tbody>
</table>
